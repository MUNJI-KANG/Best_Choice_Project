{% extends 'manager/manager_base.html' %}
{% load static %}

{% block title %}비밀번호 변경{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'manager/css/info_edit.css' %}">
<link rel="stylesheet" href="{% static 'common/css/toast.css' %}">
{% endblock %}

{% block content %}

{% if messages %}
<div id="toast-container">
  {% for message in messages %}
    <div class="toast toast-{{ message.tags }}">
      <div class="toast-content">
        <div class="toast-icon">
          {% if message.tags == "success" %}✓{% else %}!{% endif %}
        </div>
        <div class="toast-message">{{ message }}</div>
      </div>
    </div>
  {% endfor %}
</div>
{% endif %}

<section class="main">

  <div class="page-title-section">
    <h1 class="page-title">비밀번호 변경</h1>
    <p class="page-subtitle">
      관리자 계정의 비밀번호를 변경할 수 있습니다.
    </p>
  </div>

  <div class="card">
    <form method="post">
      {% csrf_token %}

      <div class="form-group">
        <label class="form-label">기존 비밀번호</label>
        <input type="password" name="current_password" class="form-input" required>
      </div>

      <div class="form-group">
        <label class="form-label">새 비밀번호</label>
        <input type="password" name="new_password" class="form-input" required>
      </div>

      <div class="form-group">
        <label class="form-label">새 비밀번호 확인</label>
        <input type="password" name="new_password_confirm" class="form-input" required>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn--primary">비밀번호 변경</button>
        <a href="{% url 'manager:dashboard' %}" class="btn btn--outline">취소</a>
      </div>
    </form>
  </div>

</section>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", function () {
  const toasts = document.querySelectorAll(".toast");

  toasts.forEach((toast, index) => {
    setTimeout(() => toast.classList.add("show"), index * 150);
    setTimeout(() => {
      toast.classList.remove("show");
      setTimeout(() => toast.remove(), 300);
    }, 3000 + index * 150);
  });
});
</script>
{% endblock %}
